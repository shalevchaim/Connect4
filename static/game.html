<!DOCTYPE html>
<html class="h-100">

<head>
  <meta charset="utf-8">
  <!-- Latest compiled and minified bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">
  <title>Creating a Full-Stack Python Application with NPM, React.js and Webpack</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
  
</head>

<body class="container-fluid h-100">
  <div class="message_holder"></div>
  <div id="root" class="row h-100"></div>
  <script>
    /*
    data['board'] = room_boards[gid]['pieces']
        data['redsMove'] = room_boards[gid]['redsMove']
        data['rowsCount'] = room_boards[gid]['rowsCount']
        data['gameOver'] = room_boards[gid]['gameOver']
        data['gameStatus'] = room_boards[gid]['gameStatus']
        */
  var data = {{ gInfo|tojson }};
  console.log("input data:");
  console.log(data);
  var newData = [];
  console.log("passed data4 :");
  '{% for key, value in gInfo.items() %}'
  console.log('{{ key }} = {{ value }}');
  // newData['{{ key }}'] = {{ value }};
  '{% endfor %}'
  newData['board'] = data.board;
  newData['redsMove'] = data.redsMove;
  newData['rowsCount'] = data.rowsCount;
  newData['gameOver'] = data.gameOver;
  newData['gameStatus'] = data.gameStatus;
  newData['gid'] = data.gid;
  newData['player_cnt'] = data.player_cnt;
  newData['players'] = data.players;
  console.log(data);
  console.log(newData);
  </script>
  <script src="../dist/gameBundle.js" type="text/javascript"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
  <!-- <script type="text/javascript">
    var segments = window.location.pathname.split('/');
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    console.log(segments);
    // console.log(document.domain + ":" + location.port + window.location.pathname);
    socket.on('connect', function () {
      socket.emit('join', { gid: segments[2] });
      var form = $('form').on('submit', function (e) {
        e.preventDefault();
        let user_name = $('input.username').val();
        let user_input = $('input.message').val();
        socket.emit('myEvent2', {
          user_name: user_name,
          message: user_input,
          gid: segments[2]
        });
        $('input.message').val('').focus();
      });
    });
    socket.on('my response2', function (msg) {
      console.log(msg);
      if (typeof msg.user_name !== 'undefined') {
        $('h3').remove();
        $('div.message_holder').append('<div><b style="color: #000">' + msg.user_name + '</b> ' + msg.message + '</div>');
      }
    });
  </script> -->
</body>

</html>